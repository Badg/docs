<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.101.0"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Spring Cloud Function | Docs</title><meta name=description content="Use Spring Cloud Function framework with LocalStack
"><meta property="og:title" content="Spring Cloud Function"><meta property="og:description" content="Use Spring Cloud Function framework with LocalStack
"><meta property="og:type" content="article"><meta property="og:url" content="/integrations/spring-cloud-function/"><meta property="article:section" content="integrations"><meta property="article:published_time" content="2021-09-28T00:00:00+00:00"><meta property="article:modified_time" content="2022-07-26T14:27:07+05:30"><meta property="og:site_name" content="Docs"><meta itemprop=name content="Spring Cloud Function"><meta itemprop=description content="Use Spring Cloud Function framework with LocalStack
"><meta itemprop=datePublished content="2021-09-28T00:00:00+00:00"><meta itemprop=dateModified content="2022-07-26T14:27:07+05:30"><meta itemprop=wordCount content="2617"><meta itemprop=keywords content="serverless-framework,spring,spring-cloud,spring-cloud-function,jvm,kotlin,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Spring Cloud Function"><meta name=twitter:description content="Use Spring Cloud Function framework with LocalStack
"><link rel=preload href=/scss/main.min.9d37a38131cd4ea68272414a2efc0ffd51b6045068017df04c435189cdb1899d.css as=style><link href=/scss/main.min.9d37a38131cd4ea68272414a2efc0ffd51b6045068017df04c435189cdb1899d.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-101988473-1","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand flex-column flex-md-row td-navbar"><div class=navbar-brand><a class=brand-link href=/><span class=navbar-logo><img src=/images/logo.svg height=40px></span>
<span class=navbar-suffix>| docs</span></a></div><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.77eef1ff51e1b69b52ddbc9a37917fd7.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></li><li class=nav-item><a class=nav-link target=_blank href=https://twitter.com/_localstack><svg width="25" height="26" viewBox="0 0 25 26" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M25 13.25c0 6.9036-5.5964 12.5-12.5 12.5C5.59644 25.75.0 20.1536.0 13.25.0 6.34644 5.59644.75 12.5.75 19.4036.75 25 6.34644 25 13.25zm-6.56-3.0468C19.0443 10.1315 19.6205 9.97084 20.1562 9.73331 19.7558 10.3325 19.2493 10.8586 18.6651 11.2797 18.6709 11.4076 18.6738 11.5366 18.6738 11.6661c0 3.9487-3.0055 8.5014-8.5012 8.5014C8.48534 20.1675 6.91443 19.6731 5.59285 18.825 5.82615 18.8528 6.06457 18.8669 6.30522 18.8669 7.70545 18.8669 8.9936 18.3894 10.0164 17.5879 8.70861 17.5636 7.6054 16.6997 7.22527 15.5129 7.40754 15.5477 7.59449 15.5662 7.78745 15.5662 8.05952 15.5662 8.32401 15.5299 8.57447 15.4612c-1.36658-.2743-2.39692-1.4817-2.39692-2.9294C6.17755 12.5193 6.17755 12.5066 6.17777 12.4939 6.58041 12.7183 7.04144 12.8526 7.53098 12.868 6.7297 12.3323 6.20183 11.4174 6.20183 10.3811c0-.547520000000001.14751-1.06113.40465-1.50232C8.08024 10.687 10.282 11.8764 12.7651 12.001 12.7139 11.7822 12.6874 11.5542 12.6874 11.32c0-1.64975 1.338-2.98781 2.9878-2.98781.8599.0 1.6364.36276 2.1815.94322C18.5369 9.14149 19.1767 8.89304 19.754 8.55056 19.5305 9.24867 19.057 9.83358 18.44 10.2032z" fill="#fff"/></svg></a></li><li class=nav-item><a class=nav-link target=_blank href=https://github.com/localstack><svg width="25" height="26" viewBox="0 0 25 26" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12.4984.75C5.59688.75.0 6.4882.0 13.5668c0 5.6616 3.58125 10.4647 8.55 12.161C9.175 25.8459 9.40312 25.4501 9.40312 25.1102 9.40312 24.8054 9.39219 23.9996 9.38594 22.9305 5.90938 23.7044 5.175 21.2119 5.175 21.2119c-.56719-1.4808-1.3875-1.875-1.3875-1.875C2.65156 18.5423 3.87187 18.5582 3.87187 18.5582 5.12656 18.6492 5.78594 19.8795 5.78594 19.8795c1.11562 1.9579 2.92656 1.393 3.63906 1.0643C9.5375 20.1156 9.86094 19.5507 10.2188 19.23 7.44375 18.9061 4.525 17.8066 4.525 12.8966c0-1.3994.4875-2.5436 1.2875-3.44036C5.68281 9.13231 5.25469 7.8286 5.93438 6.06534c0 0 1.05-.34468 3.43749 1.31327C10.3688 7.09457 11.4375 6.95256 12.5016 6.94777 13.5625 6.95415 14.6328 7.09457 15.6312 7.38021c2.386-1.65795 3.4344-1.31328 3.4344-1.31328.6813 1.76487.2531 3.06697.125 3.3909C19.9922 10.3546 20.475 11.4988 20.475 12.8982c0 4.9228-2.9219 6.0063-5.7063 6.3238C15.2172 19.6178 15.6172 20.3997 15.6172 21.5949 15.6172 23.3087 15.6016 24.6906 15.6016 25.1102 15.6016 25.4533 15.8266 25.8522 16.4609 25.7262 21.4219 24.0283 25 19.2268 25 13.5668 25 6.4882 19.4031.75 12.4984.75z" fill="#fff"/></svg></a></li><li class=nav-item><a class=btn-signup type=link href=https://app.localstack.cloud><i class="fa fa-user"></i> Sign up</a></li></ul></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.77eef1ff51e1b69b52ddbc9a37917fd7.json data-offline-search-base-href=/ data-offline-search-max-results=10>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav foldable-nav" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m--li><a href=/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-><span>Documentation</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-overview-li><input type=checkbox id=m-overview-check>
<label for=m-overview-check><a href=/overview/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-overview><span>Overview</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-get-started-li><input type=checkbox id=m-get-started-check>
<label for=m-get-started-check><a href=/get-started/ title="Get Started" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-get-started><span>🚀 Get Started</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-get-startedpro-li><input type=checkbox id=m-get-startedpro-check>
<label for=m-get-startedpro-check><a href=/get-started/pro/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-get-startedpro><span>LocalStack Pro and Enterprise</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-get-startedcockpit-li><input type=checkbox id=m-get-startedcockpit-check>
<label for=m-get-startedcockpit-check><a href=/get-started/cockpit/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-get-startedcockpit><span>LocalStack Cockpit</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-integrations-li><input type=checkbox id=m-integrations-check checked>
<label for=m-integrations-check><a href=/integrations/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-integrations><span>Integrations</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-integrationsaws-cli-li><input type=checkbox id=m-integrationsaws-cli-check>
<label for=m-integrationsaws-cli-check><a href=/integrations/aws-cli/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-integrationsaws-cli><span>AWS Command Line Interface</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-integrationsserverless-framework-li><input type=checkbox id=m-integrationsserverless-framework-check>
<label for=m-integrationsserverless-framework-check><a href=/integrations/serverless-framework/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-integrationsserverless-framework><span>Serverless Framework</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-integrationsspring-cloud-function-li><input type=checkbox id=m-integrationsspring-cloud-function-check checked>
<label for=m-integrationsspring-cloud-function-check><a href=/integrations/spring-cloud-function/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-integrationsspring-cloud-function><span class=td-sidebar-nav-active-item>Spring Cloud Function</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-integrationsarchitect-li><input type=checkbox id=m-integrationsarchitect-check>
<label for=m-integrationsarchitect-check><a href=/integrations/architect/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-integrationsarchitect><span>Architect</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-integrationscopilot-li><input type=checkbox id=m-integrationscopilot-check>
<label for=m-integrationscopilot-check><a href=/integrations/copilot/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-integrationscopilot><span>AWS Copilot CLI</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-integrationsterraform-li><input type=checkbox id=m-integrationsterraform-check>
<label for=m-integrationsterraform-check><a href=/integrations/terraform/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-integrationsterraform><span>Terraform</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-integrationsthundra-li><input type=checkbox id=m-integrationsthundra-check>
<label for=m-integrationsthundra-check><a href=/integrations/thundra/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-integrationsthundra><span>Thundra</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-integrationsaws-sam-li><input type=checkbox id=m-integrationsaws-sam-check>
<label for=m-integrationsaws-sam-check><a href=/integrations/aws-sam/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-integrationsaws-sam><span>AWS SAM</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-integrationsaws-cdk-li><input type=checkbox id=m-integrationsaws-cdk-check>
<label for=m-integrationsaws-cdk-check><a href=/integrations/aws-cdk/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-integrationsaws-cdk><span>AWS CDK</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-integrationspulumi-li><input type=checkbox id=m-integrationspulumi-check>
<label for=m-integrationspulumi-check><a href=/integrations/pulumi/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-integrationspulumi><span>Pulumi</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-integrationskafka-li><input type=checkbox id=m-integrationskafka-check>
<label for=m-integrationskafka-check><a href=/integrations/kafka/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-integrationskafka><span>Self-managed Kafka cluster</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-integrationschalice-li><input type=checkbox id=m-integrationschalice-check>
<label for=m-integrationschalice-check><a href=/integrations/chalice/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-integrationschalice><span>AWS Chalice</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-integrationssdks-li><input type=checkbox id=m-integrationssdks-check>
<label for=m-integrationssdks-check><a href=/integrations/sdks/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-integrationssdks><span>Language SDKs</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-integrationssdksdotnet-li><input type=checkbox id=m-integrationssdksdotnet-check>
<label for=m-integrationssdksdotnet-check><a href=/integrations/sdks/dotnet/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-integrationssdksdotnet><span>.NET</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-integrationssdksgo-li><input type=checkbox id=m-integrationssdksgo-check>
<label for=m-integrationssdksgo-check><a href=/integrations/sdks/go/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-integrationssdksgo><span>Go</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-integrationssdksphp-li><input type=checkbox id=m-integrationssdksphp-check>
<label for=m-integrationssdksphp-check><a href=/integrations/sdks/php/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-integrationssdksphp><span>PHP</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-integrationssdkspython-li><input type=checkbox id=m-integrationssdkspython-check>
<label for=m-integrationssdkspython-check><a href=/integrations/sdks/python/ title="Python Boto3" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-integrationssdkspython><span>Python: Boto3</span></a></label></li></ul></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-ci-li><input type=checkbox id=m-ci-check>
<label for=m-ci-check><a href=/ci/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-ci><span>LocalStack in CI</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-cicircle-ci-li><input type=checkbox id=m-cicircle-ci-check>
<label for=m-cicircle-ci-check><a href=/ci/circle-ci/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-cicircle-ci><span>CircleCI</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-cidrone-ci-li><input type=checkbox id=m-cidrone-ci-check>
<label for=m-cidrone-ci-check><a href=/ci/drone-ci/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-cidrone-ci><span>Drone CI</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-cigithub-actions-li><input type=checkbox id=m-cigithub-actions-check>
<label for=m-cigithub-actions-check><a href=/ci/github-actions/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-cigithub-actions><span>GitHub Actions</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-citravis-ci-li><input type=checkbox id=m-citravis-ci-check>
<label for=m-citravis-ci-check><a href=/ci/travis-ci/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-citravis-ci><span>Travis CI</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-aws-li><input type=checkbox id=m-aws-check>
<label for=m-aws-check><a href=/aws/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-aws><span>Local AWS Services</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awsfeature-coverage-li><input type=checkbox id=m-awsfeature-coverage-check>
<label for=m-awsfeature-coverage-check><a href=/aws/feature-coverage/ title="AWS Service Feature Coverage" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awsfeature-coverage><span>⭐ Feature Coverage</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awsamplify-li><input type=checkbox id=m-awsamplify-check>
<label for=m-awsamplify-check><a href=/aws/amplify/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awsamplify><span>Amplify</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awsapigatewayv2-li><input type=checkbox id=m-awsapigatewayv2-check>
<label for=m-awsapigatewayv2-check><a href=/aws/apigatewayv2/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awsapigatewayv2><span>API Gateway V2</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awsappsync-li><input type=checkbox id=m-awsappsync-check>
<label for=m-awsappsync-check><a href=/aws/appsync/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awsappsync><span>AppSync</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awsathena-li><input type=checkbox id=m-awsathena-check>
<label for=m-awsathena-check><a href=/aws/athena/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awsathena><span>Athena</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awsbackup-li><input type=checkbox id=m-awsbackup-check>
<label for=m-awsbackup-check><a href=/aws/backup/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awsbackup><span>Backup</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awscloudformation-li><input type=checkbox id=m-awscloudformation-check>
<label for=m-awscloudformation-check><a href=/aws/cloudformation/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awscloudformation><span>CloudFormation</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awscloudfront-li><input type=checkbox id=m-awscloudfront-check>
<label for=m-awscloudfront-check><a href=/aws/cloudfront/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awscloudfront><span>CloudFront</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awscloudwatch-li><input type=checkbox id=m-awscloudwatch-check>
<label for=m-awscloudwatch-check><a href=/aws/cloudwatch/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awscloudwatch><span>CloudWatch</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awscodecommit-li><input type=checkbox id=m-awscodecommit-check>
<label for=m-awscodecommit-check><a href=/aws/codecommit/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awscodecommit><span>CodeCommit</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awscognito-li><input type=checkbox id=m-awscognito-check>
<label for=m-awscognito-check><a href=/aws/cognito/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awscognito><span>Cognito</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awselastic-compute-cloud-li><input type=checkbox id=m-awselastic-compute-cloud-check>
<label for=m-awselastic-compute-cloud-check><a href=/aws/elastic-compute-cloud/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awselastic-compute-cloud><span>Elastic Compute Cloud (EC2)</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awselastic-container-registry-li><input type=checkbox id=m-awselastic-container-registry-check>
<label for=m-awselastic-container-registry-check><a href=/aws/elastic-container-registry/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awselastic-container-registry><span>Elastic Container Registry (ECR)</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awselastic-container-service-li><input type=checkbox id=m-awselastic-container-service-check>
<label for=m-awselastic-container-service-check><a href=/aws/elastic-container-service/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awselastic-container-service><span>Elastic Container Service (ECS)</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awselastic-kubernetes-service-li><input type=checkbox id=m-awselastic-kubernetes-service-check>
<label for=m-awselastic-kubernetes-service-check><a href=/aws/elastic-kubernetes-service/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awselastic-kubernetes-service><span>Elastic Kubernetes Service (EKS)</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awselastic-load-balancing-li><input type=checkbox id=m-awselastic-load-balancing-check>
<label for=m-awselastic-load-balancing-check><a href=/aws/elastic-load-balancing/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awselastic-load-balancing><span>Elastic Load Balancing</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awselastic-mapreduce-li><input type=checkbox id=m-awselastic-mapreduce-check>
<label for=m-awselastic-mapreduce-check><a href=/aws/elastic-mapreduce/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awselastic-mapreduce><span>Elastic MapReduce (EMR)</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awselasticache-li><input type=checkbox id=m-awselasticache-check>
<label for=m-awselasticache-check><a href=/aws/elasticache/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awselasticache><span>ElastiCache</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awselasticsearch-li><input type=checkbox id=m-awselasticsearch-check>
<label for=m-awselasticsearch-check><a href=/aws/elasticsearch/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awselasticsearch><span>Elasticsearch Service</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awsglue-li><input type=checkbox id=m-awsglue-check>
<label for=m-awsglue-check><a href=/aws/glue/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awsglue><span>Glue</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awsiam-li><input type=checkbox id=m-awsiam-check>
<label for=m-awsiam-check><a href=/aws/iam/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awsiam><span>Identity and Access Management (IAM)</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awsiot-li><input type=checkbox id=m-awsiot-check>
<label for=m-awsiot-check><a href=/aws/iot/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awsiot><span>IoT</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awskinesis-li><input type=checkbox id=m-awskinesis-check>
<label for=m-awskinesis-check><a href=/aws/kinesis/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awskinesis><span>Kinesis</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awskinesis-analytics-li><input type=checkbox id=m-awskinesis-analytics-check>
<label for=m-awskinesis-analytics-check><a href=/aws/kinesis-analytics/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awskinesis-analytics><span>Kinesis Data Analytics</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awskinesis-firehose-li><input type=checkbox id=m-awskinesis-firehose-check>
<label for=m-awskinesis-firehose-check><a href=/aws/kinesis-firehose/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awskinesis-firehose><span>Kinesis Data Firehose</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awslambda-li><input type=checkbox id=m-awslambda-check>
<label for=m-awslambda-check><a href=/aws/lambda/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awslambda><span>Lambda</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awsmanaged-streaming-for-kafka-li><input type=checkbox id=m-awsmanaged-streaming-for-kafka-check>
<label for=m-awsmanaged-streaming-for-kafka-check><a href=/aws/managed-streaming-for-kafka/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awsmanaged-streaming-for-kafka><span>Managed Streaming for Kafka (MSK)</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awsneptune-li><input type=checkbox id=m-awsneptune-check>
<label for=m-awsneptune-check><a href=/aws/neptune/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awsneptune><span>Neptune</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awsopensearch-li><input type=checkbox id=m-awsopensearch-check>
<label for=m-awsopensearch-check><a href=/aws/opensearch/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awsopensearch><span>OpenSearch Service</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awsqldb-li><input type=checkbox id=m-awsqldb-check>
<label for=m-awsqldb-check><a href=/aws/qldb/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awsqldb><span>Quantum Ledger Database (QLDB)</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awsrds-li><input type=checkbox id=m-awsrds-check>
<label for=m-awsrds-check><a href=/aws/rds/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awsrds><span>Relational Database Service (RDS)</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awsroute53-li><input type=checkbox id=m-awsroute53-check>
<label for=m-awsroute53-check><a href=/aws/route53/ title="Route 53" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awsroute53><span>Route53</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awss3-li><input type=checkbox id=m-awss3-check>
<label for=m-awss3-check><a href=/aws/s3/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awss3><span>S3</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awssagemaker-li><input type=checkbox id=m-awssagemaker-check>
<label for=m-awssagemaker-check><a href=/aws/sagemaker/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awssagemaker><span>SageMaker</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awsses-li><input type=checkbox id=m-awsses-check>
<label for=m-awsses-check><a href=/aws/ses/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awsses><span>Simple Email Service (SES)</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awssqs-li><input type=checkbox id=m-awssqs-check>
<label for=m-awssqs-check><a href=/aws/sqs/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awssqs><span>Simple Queue Service (SQS)</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awssystems-manager-li><input type=checkbox id=m-awssystems-manager-check>
<label for=m-awssystems-manager-check><a href=/aws/systems-manager/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awssystems-manager><span>Systems Manager (SSM)</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awstimestream-li><input type=checkbox id=m-awstimestream-check>
<label for=m-awstimestream-check><a href=/aws/timestream/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awstimestream><span>Timestream</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awstransfer-li><input type=checkbox id=m-awstransfer-check>
<label for=m-awstransfer-check><a href=/aws/transfer/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awstransfer><span>Transfer</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-awsxray-tracing-li><input type=checkbox id=m-awsxray-tracing-check>
<label for=m-awsxray-tracing-check><a href=/aws/xray-tracing/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-awsxray-tracing><span>XRay Tracing</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-tools-li><input type=checkbox id=m-tools-check>
<label for=m-tools-check><a href=/tools/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-tools><span>LocalStack Tools</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-toolsanalytics-dashboard-li><input type=checkbox id=m-toolsanalytics-dashboard-check>
<label for=m-toolsanalytics-dashboard-check><a href=/tools/analytics-dashboard/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-toolsanalytics-dashboard><span>Analytics Dashboard</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-toolstesting-tools-li><input type=checkbox id=m-toolstesting-tools-check>
<label for=m-toolstesting-tools-check><a href=/tools/testing-tools/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-toolstesting-tools><span>LocalStack Testing Tools</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-toolsmulti-account-setups-li><input type=checkbox id=m-toolsmulti-account-setups-check>
<label for=m-toolsmulti-account-setups-check><a href=/tools/multi-account-setups/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-toolsmulti-account-setups><span>Multi-Account Setups</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-toolscloud-pods-li><input type=checkbox id=m-toolscloud-pods-check>
<label for=m-toolscloud-pods-check><a href=/tools/cloud-pods/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-toolscloud-pods><span>Cloud Pods</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-toolscloud-podspods-cli-li><input type=checkbox id=m-toolscloud-podspods-cli-check>
<label for=m-toolscloud-podspods-cli-check><a href=/tools/cloud-pods/pods-cli/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-toolscloud-podspods-cli><span>Cloud Pods CLI</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-toolslambda-tools-li><input type=checkbox id=m-toolslambda-tools-check>
<label for=m-toolslambda-tools-check><a href=/tools/lambda-tools/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-toolslambda-tools><span>Lambda Tools</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-toolslambda-toolshot-swapping-li><input type=checkbox id=m-toolslambda-toolshot-swapping-check>
<label for=m-toolslambda-toolshot-swapping-check><a href=/tools/lambda-tools/hot-swapping/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-toolslambda-toolshot-swapping><span>Hot Swapping</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-toolslambda-toolsdebugging-li><input type=checkbox id=m-toolslambda-toolsdebugging-check>
<label for=m-toolslambda-toolsdebugging-check><a href=/tools/lambda-tools/debugging/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-toolslambda-toolsdebugging><span>Remote Debugging</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-toolslocal-endpoint-injection-li><input type=checkbox id=m-toolslocal-endpoint-injection-check>
<label for=m-toolslocal-endpoint-injection-check><a href=/tools/local-endpoint-injection/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-toolslocal-endpoint-injection><span>Local Endpoint Injection</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-toolslocal-endpoint-injectiondns-server-li><input type=checkbox id=m-toolslocal-endpoint-injectiondns-server-check>
<label for=m-toolslocal-endpoint-injectiondns-server-check><a href=/tools/local-endpoint-injection/dns-server/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-toolslocal-endpoint-injectiondns-server><span>DNS Server</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-toolslocal-endpoint-injectionpatched-sdks-li><input type=checkbox id=m-toolslocal-endpoint-injectionpatched-sdks-check>
<label for=m-toolslocal-endpoint-injectionpatched-sdks-check><a href=/tools/local-endpoint-injection/patched-sdks/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-toolslocal-endpoint-injectionpatched-sdks><span>Patched AWS SDKs for Lambdas</span></a></label></li></ul></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-localstack-li><input type=checkbox id=m-localstack-check>
<label for=m-localstack-check><a href=/localstack/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-localstack><span>Understanding LocalStack</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-localstackconfiguration-li><input type=checkbox id=m-localstackconfiguration-check>
<label for=m-localstackconfiguration-check><a href=/localstack/configuration/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-localstackconfiguration><span>Configuration</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-localstackexternal-ports-li><input type=checkbox id=m-localstackexternal-ports-check>
<label for=m-localstackexternal-ports-check><a href=/localstack/external-ports/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-localstackexternal-ports><span>External Service Port Range</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-localstackfilesystem-li><input type=checkbox id=m-localstackfilesystem-check>
<label for=m-localstackfilesystem-check><a href=/localstack/filesystem/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-localstackfilesystem><span>Filesystem Layout</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-localstacklambda-executors-li><input type=checkbox id=m-localstacklambda-executors-check>
<label for=m-localstacklambda-executors-check><a href=/localstack/lambda-executors/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-localstacklambda-executors><span>Lambda Executor Modes</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-localstackpersistence-mechanism-li><input type=checkbox id=m-localstackpersistence-mechanism-check>
<label for=m-localstackpersistence-mechanism-check><a href=/localstack/persistence-mechanism/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-localstackpersistence-mechanism><span>Persistence Mechanism</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-localstackarm64-support-li><input type=checkbox id=m-localstackarm64-support-check>
<label for=m-localstackarm64-support-check><a href=/localstack/arm64-support/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-localstackarm64-support><span>ARM64 Support</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-localstackpodman-li><input type=checkbox id=m-localstackpodman-check>
<label for=m-localstackpodman-check><a href=/localstack/podman/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-localstackpodman><span>Podman</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-localstacklimitations-li><input type=checkbox id=m-localstacklimitations-check>
<label for=m-localstacklimitations-check><a href=/localstack/limitations/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-localstacklimitations><span>LocalStack Limitations</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-localstackcoverage-li><input type=checkbox id=m-localstackcoverage-check>
<label for=m-localstackcoverage-check><a href=/localstack/coverage/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-localstackcoverage><span>LocalStack Coverage</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-developer-guide-li><input type=checkbox id=m-developer-guide-check>
<label for=m-developer-guide-check><a href=/developer-guide/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-developer-guide><span>Developer Guide</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-developer-guidebasics-li><input type=checkbox id=m-developer-guidebasics-check>
<label for=m-developer-guidebasics-check><a href=/developer-guide/basics/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-developer-guidebasics><span>Basics</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-developer-guidesetup-li><input type=checkbox id=m-developer-guidesetup-check>
<label for=m-developer-guidesetup-check><a href=/developer-guide/setup/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-developer-guidesetup><span>Setup and requirements</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-developer-guideintegration-tests-li><input type=checkbox id=m-developer-guideintegration-tests-check>
<label for=m-developer-guideintegration-tests-check><a href=/developer-guide/integration-tests/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-developer-guideintegration-tests><span>Integration tests</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-developer-guidelocalstack-extensions-li><input type=checkbox id=m-developer-guidelocalstack-extensions-check>
<label for=m-developer-guidelocalstack-extensions-check><a href=/developer-guide/localstack-extensions/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-developer-guidelocalstack-extensions><span>LocalStack Extensions</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-developer-guideterraform-tests-li><input type=checkbox id=m-developer-guideterraform-tests-check>
<label for=m-developer-guideterraform-tests-check><a href=/developer-guide/terraform-tests/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-developer-guideterraform-tests><span>Terraform test suite</span></a></label></li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/localstack/docs/tree/main/content/en/integrations/spring-cloud-function/index.md class=td-page-meta--view target=_blank rel=noopener><i class="fa fa-file-alt fa-fw"></i> View page source</a>
<a href=https://github.com/localstack/docs/edit/main/content/en/integrations/spring-cloud-function/index.md class=td-page-meta--edit target=_blank rel=noopener><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/localstack/docs/new/main/content/en/integrations/spring-cloud-function/index.md?filename=change-me.md&value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" class=td-page-meta--child target=_blank rel=noopener><i class="fa fa-edit fa-fw"></i> Create child page</a>
<a href="https://github.com/localstack/docs/issues/new?title=Spring%20Cloud%20Function" class=td-page-meta--issue target=_blank rel=noopener><i class="fas fa-tasks fa-fw"></i> Create documentation issue</a>
<a href=https://github.com/localstack/localstack/issues/new class=td-page-meta--project-issue target=_blank rel=noopener><i class="fas fa-tasks fa-fw"></i> Create project issue</a></div><h5 class=toc-title>Table of Contents</h5><div class=td-toc><nav id=TableOfContents><ul><li><a href=#overview>Overview</a></li><li><a href=#covered-topics>Covered Topics</a><ul><li><a href=#limitations>Limitations</a></li></ul></li><li><a href=#setting-up-an-application>Setting up an Application</a><ul><li><a href=#starting-a-new-project>Starting a new Project</a></li><li><a href=#project-settings>Project Settings</a></li><li><a href=#configure-log4j2-for-aws-lambda>Configure Log4J2 for AWS Lambda</a></li><li><a href=#configure-spring-cloud-function-for-rest-api>Configure Spring Cloud Function for Rest API</a></li><li><a href=#define-an-application-class>Define an Application class</a></li><li><a href=#configure-jackson>Configure Jackson</a></li><li><a href=#define-logging-utility>Define Logging Utility</a></li><li><a href=#add-requestresponse-utilities>Add Request/Response utilities</a></li><li><a href=#creating-a-sample-model--dto>Creating a sample Model / DTO</a></li><li><a href=#creating-rest-api-endpoints>Creating Rest API endpoints</a></li><li><a href=#creating-other-lambda-handlers>Creating other lambda Handlers</a></li></ul></li><li><a href=#setting-up-deployment>Setting up Deployment</a></li><li><a href=#testing-debugging-and-code-hot-swapping>Testing, Debugging and Code hot-swapping</a></li><li><a href=#useful-links>Useful Links</a></li></ul></nav></div><div class="taxonomy taxonomy-terms-cloud taxo-tags"><h5 class=taxonomy-title>Tag Cloud</h5><ul class=taxonomy-terms><li><a class=taxonomy-term href=/tags/account-id/ data-taxonomy-term=account-id><span class=taxonomy-label>account-id</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/tags/apple/ data-taxonomy-term=apple><span class=taxonomy-label>apple</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/tags/architect/ data-taxonomy-term=architect><span class=taxonomy-label>architect</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/tags/cdk/ data-taxonomy-term=cdk><span class=taxonomy-label>cdk</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/tags/chalice/ data-taxonomy-term=chalice><span class=taxonomy-label>chalice</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/tags/ci/ data-taxonomy-term=ci><span class=taxonomy-label>ci</span><span class=taxonomy-count>4</span></a></li><li><a class=taxonomy-term href=/tags/cloudformation/ data-taxonomy-term=cloudformation><span class=taxonomy-label>cloudformation</span><span class=taxonomy-count>3</span></a></li><li><a class=taxonomy-term href=/tags/continuous-delivery/ data-taxonomy-term=continuous-delivery><span class=taxonomy-label>continuous-delivery</span><span class=taxonomy-count>5</span></a></li><li><a class=taxonomy-term href=/tags/continuous-integration/ data-taxonomy-term=continuous-integration><span class=taxonomy-label>continuous-integration</span><span class=taxonomy-count>4</span></a></li><li><a class=taxonomy-term href=/tags/docker/ data-taxonomy-term=docker><span class=taxonomy-label>docker</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/tags/infrastructure-as-code/ data-taxonomy-term=infrastructure-as-code><span class=taxonomy-label>infrastructure-as-code</span><span class=taxonomy-count>6</span></a></li><li><a class=taxonomy-term href=/tags/jvm/ data-taxonomy-term=jvm><span class=taxonomy-label>jvm</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/tags/kafka/ data-taxonomy-term=kafka><span class=taxonomy-label>kafka</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/tags/kotlin/ data-taxonomy-term=kotlin><span class=taxonomy-label>kotlin</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/tags/m1/ data-taxonomy-term=m1><span class=taxonomy-label>m1</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/tags/multi-account/ data-taxonomy-term=multi-account><span class=taxonomy-label>multi-account</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/tags/multi-tenant/ data-taxonomy-term=multi-tenant><span class=taxonomy-label>multi-tenant</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/tags/namespaces/ data-taxonomy-term=namespaces><span class=taxonomy-label>namespaces</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/tags/observability/ data-taxonomy-term=observability><span class=taxonomy-label>observability</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/tags/podman/ data-taxonomy-term=podman><span class=taxonomy-label>podman</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/tags/pulumi/ data-taxonomy-term=pulumi><span class=taxonomy-label>pulumi</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/tags/raspberry-pi/ data-taxonomy-term=raspberry-pi><span class=taxonomy-label>raspberry pi</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/tags/sam/ data-taxonomy-term=sam><span class=taxonomy-label>sam</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/tags/sdk/ data-taxonomy-term=sdk><span class=taxonomy-label>sdk</span><span class=taxonomy-count>4</span></a></li><li><a class=taxonomy-term href=/tags/self-managed/ data-taxonomy-term=self-managed><span class=taxonomy-label>self-managed</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/tags/serverless-framework/ data-taxonomy-term=serverless-framework><span class=taxonomy-label>serverless-framework</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=/tags/silicon/ data-taxonomy-term=silicon><span class=taxonomy-label>silicon</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/tags/spring/ data-taxonomy-term=spring><span class=taxonomy-label>spring</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/tags/spring-cloud/ data-taxonomy-term=spring-cloud><span class=taxonomy-label>spring-cloud</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/tags/spring-cloud-function/ data-taxonomy-term=spring-cloud-function><span class=taxonomy-label>spring-cloud-function</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/tags/terraform/ data-taxonomy-term=terraform><span class=taxonomy-label>terraform</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/tags/testing/ data-taxonomy-term=testing><span class=taxonomy-label>testing</span><span class=taxonomy-count>4</span></a></li><li><a class=taxonomy-term href=/tags/thundra/ data-taxonomy-term=thundra><span class=taxonomy-label>thundra</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/tags/tracing/ data-taxonomy-term=tracing><span class=taxonomy-label>tracing</span><span class=taxonomy-count>1</span></a></li></ul></div><div class="taxonomy taxonomy-terms-cloud taxo-categories"><h5 class=taxonomy-title>Categories</h5><ul class=taxonomy-terms><li><a class=taxonomy-term href=/categories/cli/ data-taxonomy-term=cli><span class=taxonomy-label>CLI</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/categories/dns/ data-taxonomy-term=dns><span class=taxonomy-label>DNS</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=/categories/localstack-cockpit/ data-taxonomy-term=localstack-cockpit><span class=taxonomy-label>LocalStack Cockpit</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/categories/localstack-community/ data-taxonomy-term=localstack-community><span class=taxonomy-label>LocalStack Community</span><span class=taxonomy-count>12</span></a></li><li><a class=taxonomy-term href=/categories/localstack-pro/ data-taxonomy-term=localstack-pro><span class=taxonomy-label>LocalStack Pro</span><span class=taxonomy-count>41</span></a></li><li><a class=taxonomy-term href=/categories/localstack-pro-enterprise/ data-taxonomy-term=localstack-pro-enterprise><span class=taxonomy-label>LocalStack Pro & Enterprise</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/categories/persistence/ data-taxonomy-term=persistence><span class=taxonomy-label>Persistence</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=/categories/stub/ data-taxonomy-term=stub><span class=taxonomy-label>Stub</span><span class=taxonomy-count>4</span></a></li><li><a class=taxonomy-term href=/categories/tools/ data-taxonomy-term=tools><span class=taxonomy-label>Tools</span><span class=taxonomy-count>4</span></a></li></ul></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=/integrations/>Integrations</a></li><li class="breadcrumb-item active" aria-current=page><a href=/integrations/spring-cloud-function/ aria-disabled=true class="btn-link disabled">Spring Cloud Function</a></li></ol></nav><div class=td-content><h1>Spring Cloud Function</h1><div class=lead>Use Spring Cloud Function framework with LocalStack</div><header class=article-meta><div class="taxonomy taxonomy-terms-article taxo-tags"><h5 class=taxonomy-title>Tags:</h5><ul class=taxonomy-terms><li><a class=taxonomy-term href=/tags/serverless-framework/ data-taxonomy-term=serverless-framework><span class=taxonomy-label>serverless-framework</span></a></li><li><a class=taxonomy-term href=/tags/spring/ data-taxonomy-term=spring><span class=taxonomy-label>spring</span></a></li><li><a class=taxonomy-term href=/tags/spring-cloud/ data-taxonomy-term=spring-cloud><span class=taxonomy-label>spring-cloud</span></a></li><li><a class=taxonomy-term href=/tags/spring-cloud-function/ data-taxonomy-term=spring-cloud-function><span class=taxonomy-label>spring-cloud-function</span></a></li><li><a class=taxonomy-term href=/tags/jvm/ data-taxonomy-term=jvm><span class=taxonomy-label>jvm</span></a></li><li><a class=taxonomy-term href=/tags/kotlin/ data-taxonomy-term=kotlin><span class=taxonomy-label>kotlin</span></a></li></ul></div><div class="taxonomy taxonomy-terms-article taxo-categories"><h5 class=taxonomy-title>Categories:</h5><ul class=taxonomy-terms><li><a class=taxonomy-term href=/categories/localstack-community/ data-taxonomy-term=localstack-community><span class=taxonomy-label>LocalStack Community</span></a></li><li><a class=taxonomy-term href=/categories/localstack-pro/ data-taxonomy-term=localstack-pro><span class=taxonomy-label>LocalStack Pro</span></a></li></ul></div></header><p><img src=spring-logo.svg width=600px alt="Spring logo"><br></p><h2 id=overview>Overview</h2><p>In this guide, you will learn how to use LocalStack to test
your serverless applications powered by Spring Cloud Function framework.</p><table><thead><tr><th>Complexity</th><th>★★★☆☆</th></tr></thead><tbody><tr><td>Time to read</td><td>30 minutes</td></tr><tr><td>Edition</td><td>community [pro]</td></tr><tr><td>Platform</td><td>x64_86 (-aarch64)</td></tr></tbody></table><div class="alert alert-warning" role=alert><h4 class=alert-heading>aarch64 warning</h4>Some features and services described in this document may not work properly on
aarch64, including Apple&rsquo;s M1 silicon</div><h2 id=covered-topics>Covered Topics</h2><p>We will create a new Rest API application that will route requests
to a Cloud Function using <code>functionRouter</code> and routing expressions.</p><p>The primary language for the application is Kotlin powered by
<a href=https://gradle.org>Gradle</a> build tool, but the described concepts would work for
any other JVM setup.</p><ul><li><a href=#limitations>Limitations</a></li><li><a href=#setting-up-an-application>Setting up an Application</a><ul><li><a href=#starting-a-new-project>Starting a new Project</a></li><li><a href=#project-settings>Project Settings</a></li><li><a href=#configure-log4j2-for-aws-lambda>Configure Log4J2 for AWS Lambda</a></li><li><a href=#configure-spring-cloud-function-for-rest-api>Configure Spring Cloud Function for Rest API</a></li><li><a href=#define-an-application-class>Define an Application class</a></li><li><a href=#configure-jackson>Configure Jackson</a></li><li><a href=#define-logging-utility>Define Logging Utility</a></li><li><a href=#add-requestresponse-utilities>Add Request/Response utilities</a></li><li><a href=#creating-a-sample-model--dto>Creating a sample Model / DTO</a></li><li><a href=#creating-rest-api-endpoints>Creating Rest API endpoints</a></li><li><a href=#cold-start-and-warmup-pro>Cold Start and Warmup (PRO)</a></li><li><a href=#creating-other-lambda-handlers>Creating other lambda Handlers</a></li></ul></li><li><a href=#settings-up-deployment>Setting up Deployment</a></li><li><a href=#testing-debugging-and-code-hot-swapping>Testing, Debugging and Code hot-swapping</a></li><li><a href=#useful-links>Useful links</a></li></ul><h3 id=limitations>Limitations</h3><p>This document demonstrates the usage of the Spring Cloud Function framework
together with LocalStack.
It does not cover some of the application-specific topics,
like 404 error handling, or parametrized routing, that you need to consider
when building production-ready applications.</p><h2 id=setting-up-an-application>Setting up an Application</h2><p>We recommend using <a href=https://www.jenv.be>jenv</a> to manage multiple Java runtimes.</p><h3 id=starting-a-new-project>Starting a new Project</h3><p>Please follow the instructions from the official <a href=https://gradle.org>website</a> to
install the Gradle build tool on your machine.</p><p>Then run the following command to initialize a new Gradle project</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span><span class=command-prefix>$ </span>gradle init</span></span></code></pre></div><p>Running the command below will run the gradle wrapper task</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span><span class=command-prefix>$ </span>gradle wrapper</span></span></code></pre></div><p>After running the wrapper task, you will find the Gradle wrapper script <code>gradlew</code>.
From now on, we will use the wrapper instead of the globally installed Gradle binary:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span><span class=command-prefix>$ </span>./gradlew &lt;command&gt;</span></span></code></pre></div><h3 id=project-settings>Project Settings</h3><p>Let&rsquo;s give our project a name:
open <code>settings.gradle</code>, and adjust the autogenerated name to something meaningful.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gradle data-lang=gradle><span style=display:flex><span><span style=color:#000>rootProject</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>name</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#39;localstack-sampleproject&#39;</span>
</span></span></code></pre></div><p>Now we need to define our dependencies.
Here&rsquo;s a list of what we will be using in our project.</p><p>Gradle plugins:</p><ul><li><a href=https://docs.gradle.org/current/userguide/java_plugin.html>java</a></li><li><a href=https://kotlinlang.org/docs/gradle.html#targeting-the-jvm>kotlin jvm</a></li><li><a href=https://kotlinlang.org/docs/all-open-plugin.html#spring-support>kotlin spring plugin</a></li><li><a href=https://docs.spring.io/spring-boot/docs/current/gradle-plugin/reference/htmlsingle/>spring boot plugin</a></li><li><a href=https://docs.spring.io/spring-boot/docs/current/gradle-plugin/reference/htmlsingle/#managing-dependencies>spring dependency management plugin</a></li><li><a href=https://github.com/johnrengelman/shadow>shadow plugin</a></li></ul><p>Dependencies:</p><ul><li><a href=https://mvnrepository.com/artifact/org.jetbrains.kotlin/kotlin-stdlib>kotlin stdlib</a></li><li><a href=https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-function-web>spring cloud starter function web</a></li><li><a href=https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-function-adapter-aws>spring cloud function adapter for aws</a></li><li><a href=https://mvnrepository.com/artifact/com.amazonaws/aws-lambda-java-log4j2>lambda log4j2</a></li><li><a href=https://mvnrepository.com/artifact/com.amazonaws/aws-lambda-java-events>lambda events</a></li><li><a href=https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-core>jackson core</a></li><li><a href=https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind>jackson databind</a></li><li><a href=https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-annotations>jackson annotations</a></li><li><a href=https://mvnrepository.com/artifact/com.fasterxml.jackson.module/jackson-module-kotlin>jackson module kotlin</a></li></ul><p>In order to deploy our application to AWS, we need to build so-called &ldquo;fat jar&rdquo;
which contains all application dependencies.
To that end, we use the &ldquo;Shadow Jar&rdquo; plugin.</p><p>Here&rsquo;s our final <code>build.gradle</code>:</p><div class=highlight><div style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">41
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">42
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">43
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">44
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">45
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">46
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">47
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">48
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">49
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">50
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">51
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">52
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">53
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">54
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">55
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">56
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">57
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">58
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">59
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">60
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">61
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">62
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">63
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">64
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">65
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">66
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">67
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">68
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">69
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">70
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">71
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">72
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">73
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">74
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">75
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">76
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gradle data-lang=gradle><span style=display:flex><span><span style=color:#000>plugins</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>id</span> <span style=color:#4e9a06>&#34;java&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>id</span> <span style=color:#4e9a06>&#34;org.jetbrains.kotlin.jvm&#34;</span> <span style=color:#000>version</span> <span style=color:#4e9a06>&#39;1.5.31&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>id</span> <span style=color:#4e9a06>&#34;org.jetbrains.kotlin.plugin.spring&#34;</span> <span style=color:#000>version</span> <span style=color:#4e9a06>&#39;1.5.31&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>id</span> <span style=color:#4e9a06>&#39;org.springframework.boot&#39;</span> <span style=color:#000>version</span> <span style=color:#4e9a06>&#39;2.5.5&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>id</span> <span style=color:#4e9a06>&#34;io.spring.dependency-management&#34;</span> <span style=color:#000>version</span> <span style=color:#4e9a06>&#39;1.0.11.RELEASE&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>id</span> <span style=color:#4e9a06>&#34;com.github.johnrengelman.shadow&#34;</span> <span style=color:#000>version</span> <span style=color:#4e9a06>&#39;7.0.0&#39;</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>group</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#39;org.localstack.sampleproject&#39;</span>
</span></span><span style=display:flex><span><span style=color:#000>sourceCompatibility</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>11</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>tasks</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>withType</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>JavaCompile</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>options</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>encoding</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#39;UTF-8&#39;</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>repositories</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>mavenCentral</span><span style=color:#ce5c00;font-weight:700>()</span>
</span></span><span style=display:flex><span>  <span style=color:#000>maven</span> <span style=color:#ce5c00;font-weight:700>{</span> <span style=color:#000>url</span> <span style=color:#4e9a06>&#34;https://plugins.gradle.org/m2/&#34;</span> <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>ext</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>springCloudVersion</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;3.1.4&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>awsLambdaLog4jVersion</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;1.2.0&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>awsLambdaJavaEventsVersion</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;3.10.0&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>jacksonVersion</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;2.12.5&#34;</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>dependencies</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>implementation</span> <span style=color:#4e9a06>&#34;org.jetbrains.kotlin:kotlin-stdlib&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#000>implementation</span> <span style=color:#4e9a06>&#34;org.springframework.cloud:spring-cloud-starter-function-web:$springCloudVersion&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>implementation</span> <span style=color:#4e9a06>&#34;org.springframework.cloud:spring-cloud-function-adapter-aws:$springCloudVersion&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#000>implementation</span> <span style=color:#4e9a06>&#34;com.amazonaws:aws-lambda-java-log4j2:$awsLambdaLog4jVersion&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>implementation</span> <span style=color:#4e9a06>&#34;com.amazonaws:aws-lambda-java-events:$awsLambdaJavaEventsVersion&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#000>implementation</span> <span style=color:#4e9a06>&#34;com.fasterxml.jackson.core:jackson-core:$jacksonVersion&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>implementation</span> <span style=color:#4e9a06>&#34;com.fasterxml.jackson.core:jackson-databind:$jacksonVersion&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>implementation</span> <span style=color:#4e9a06>&#34;com.fasterxml.jackson.core:jackson-annotations:$jacksonVersion&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>implementation</span> <span style=color:#4e9a06>&#34;com.fasterxml.jackson.module:jackson-module-kotlin:$jacksonVersion&#34;</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>com.github.jengelman.gradle.plugins.shadow.transformers.*</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// Configure the main class
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>jar</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>manifest</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#000>attributes</span> <span style=color:#4e9a06>&#39;Start-Class&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;org.localstack.sampleproject.Application&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// Build a fatjar (with dependencies) for aws lambda
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>shadowJar</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>transform</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>Log4j2PluginsCacheFileTransformer</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#000>dependencies</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#000>exclude</span><span style=color:#ce5c00;font-weight:700>(</span>
</span></span><span style=display:flex><span>          <span style=color:#000>dependency</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;org.springframework.cloud:spring-cloud-function-web:${springCloudVersion}&#34;</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span>      <span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span>  <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Required for Spring
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>mergeServiceFiles</span><span style=color:#ce5c00;font-weight:700>()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#000>append</span> <span style=color:#4e9a06>&#39;META-INF/spring.handlers&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>append</span> <span style=color:#4e9a06>&#39;META-INF/spring.schemas&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>append</span> <span style=color:#4e9a06>&#39;META-INF/spring.tooling&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#000>transform</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>PropertiesFileTransformer</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#000>paths</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#ce5c00;font-weight:700>[</span><span style=color:#4e9a06>&#39;META-INF/spring.factories&#39;</span><span style=color:#ce5c00;font-weight:700>]</span>
</span></span><span style=display:flex><span>      <span style=color:#000>mergeStrategy</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;append&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>assemble</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>dependsOn</span> <span style=color:#000>shadowJar</span></span></span></code></pre></td></tr></table></div></div><p>Please note that we will be using <code>org.localstack.sampleproject</code> as a
working namespace, and <code>org.localstack.sampleproject.Application</code> as an
entry class for our application.
You can adjust it for your needs, but don&rsquo;t forget to change your package names accordingly.</p><h3 id=configure-log4j2-for-aws-lambda>Configure Log4J2 for AWS Lambda</h3><p>Spring framework comes with Log4J logger, so all we need to do is to configure
it for AWS Lambda.
In this project, we are following
<a href=https://docs.aws.amazon.com/lambda/latest/dg/java-logging.html#java-wt-logging-using-log4j2.8>official documentation</a>
to setup up <code>src/main/resources/log4j2.xml</code> content.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#8f5902;font-style:italic>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>&lt;Configuration</span> <span style=color:#c4a000>packages=</span><span style=color:#4e9a06>&#34;com.amazonaws.services.lambda.runtime.log4j2.LambdaAppender&#34;</span><span style=color:#204a87;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;Appenders&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&lt;Lambda</span> <span style=color:#c4a000>name=</span><span style=color:#4e9a06>&#34;Lambda&#34;</span><span style=color:#204a87;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>&lt;PatternLayout&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>&lt;pattern&gt;</span>%d{yyyy-MM-dd HH:mm:ss} %X{AWSRequestId} %-5p %c{1}:%L - %m%n<span style=color:#204a87;font-weight:700>&lt;/pattern&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>&lt;/PatternLayout&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&lt;/Lambda&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;/Appenders&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;Loggers&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&lt;Root</span> <span style=color:#c4a000>level=</span><span style=color:#4e9a06>&#34;debug&#34;</span><span style=color:#204a87;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>&lt;AppenderRef</span> <span style=color:#c4a000>ref=</span><span style=color:#4e9a06>&#34;Lambda&#34;</span> <span style=color:#204a87;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&lt;/Root&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;/Loggers&gt;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>&lt;/Configuration&gt;</span>
</span></span></code></pre></div><h3 id=configure-spring-cloud-function-for-rest-api>Configure Spring Cloud Function for Rest API</h3><p>Spring Function comes with <code>functionRouter</code> that can route
requests to different <code>Beans</code> based on predefined routing expressions.
Let&rsquo;s configure it to lookup our function Beans by HTTP method and path, create a
new <code>application.properties</code> file under <code>src/main/resources/application.properties</code>
with the following content:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-env data-lang=env><span style=display:flex><span>spring.main.banner-mode<span style=color:#ce5c00;font-weight:700>=</span>off
</span></span><span style=display:flex><span>spring.cloud.function.definition<span style=color:#ce5c00;font-weight:700>=</span>functionRouter
</span></span><span style=display:flex><span>spring.cloud.function.routing-expression<span style=color:#ce5c00;font-weight:700>=</span>headers<span style=color:#ce5c00;font-weight:700>[</span><span style=color:#4e9a06>&#39;httpMethod&#39;</span><span style=color:#ce5c00;font-weight:700>]</span>.concat<span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#39; &#39;</span><span style=color:#ce5c00;font-weight:700>)</span>.concat<span style=color:#ce5c00;font-weight:700>(</span>headers<span style=color:#ce5c00;font-weight:700>[</span><span style=color:#4e9a06>&#39;path&#39;</span><span style=color:#ce5c00;font-weight:700>])</span>
</span></span><span style=display:flex><span>spring.cloud.function.scan.packages<span style=color:#ce5c00;font-weight:700>=</span>org.localstack.sampleproject.api
</span></span></code></pre></div><p>Once configured, you can use <code>FunctionInvoker</code> as a handler for your Rest API lambda function.
It will automatically pick up the configuration we have just set.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>org</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>springframework</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>cloud</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>function</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>adapter</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>aws</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>FunctionInvoker</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>handleRequest</span>
</span></span></code></pre></div><h3 id=define-an-application-class>Define an Application class</h3><p>Now our application needs an entry-class, the one we referenced earlier.
Let&rsquo;s add it under <code>src/main/kotlin/org/localstack/sampleproject/Application.kt</code>.</p><div class=highlight><div style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>org.localstack.sampleproject</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>org.springframework.boot.autoconfigure.SpringBootApplication</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#5c35cc;font-weight:700>@SpringBootApplication</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>Application</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>fun</span> <span style=color:#000>main</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>args</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>Array</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>String</span><span style=color:#000;font-weight:700>&gt;)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// Do nothing unless you use a custom runtime
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>}</span></span></span></code></pre></td></tr></table></div></div><h3 id=configure-jackson>Configure Jackson</h3><p>In our sample project we are using a JSON format for requests and responses.
The easiest way to get started with JSON is to use the Jackson library.
Let&rsquo;s configure it by creating a new configuration class <code>JacksonConfiguration.kt</code> under
<code>src/main/kotlin/org/localstack/sampleproject/config</code>:</p><div class=highlight><div style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>org.localstack.sampleproject.config</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>com.fasterxml.jackson.annotation.JsonInclude</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>com.fasterxml.jackson.databind.*</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>org.springframework.context.annotation.Bean</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>org.springframework.context.annotation.Configuration</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>org.springframework.context.annotation.Primary</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>org.springframework.http.converter.json.Jackson2ObjectMapperBuilder</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>java.text.DateFormat</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#5c35cc;font-weight:700>@Configuration</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>JacksonConfiguration</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#5c35cc;font-weight:700>@Bean</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>fun</span> <span style=color:#000>jacksonBuilder</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>Jackson2ObjectMapperBuilder</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>.</span><span style=color:#000>dateFormat</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>DateFormat</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getDateInstance</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>DateFormat</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>FULL</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#5c35cc;font-weight:700>@Bean</span>
</span></span><span style=display:flex><span>    <span style=color:#5c35cc;font-weight:700>@Primary</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>fun</span> <span style=color:#000>objectMapper</span><span style=color:#000;font-weight:700>():</span> <span style=color:#000>ObjectMapper</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>ObjectMapper</span><span style=color:#000;font-weight:700>().</span><span style=color:#000>apply</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>configure</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>DeserializationFeature</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>FAIL_ON_UNKNOWN_PROPERTIES</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000>configure</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>SerializationFeature</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>FAIL_ON_EMPTY_BEANS</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000>configure</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>SerializationFeature</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WRITE_ENUMS_USING_TO_STRING</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000>configure</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>SerializationFeature</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WRITE_DATES_AS_TIMESTAMPS</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000>configure</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>SerializationFeature</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ORDER_MAP_ENTRIES_BY_KEYS</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000>configure</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>MapperFeature</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>SORT_PROPERTIES_ALPHABETICALLY</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000>setSerializationInclusion</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>JsonInclude</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Include</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NON_NULL</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000>findAndRegisterModules</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span></span></span></code></pre></td></tr></table></div></div><p>In applications where you need support for multiple formats or a format
different from JSON (for example, SOAP/XML applications) simply use multiple
beans with corresponding
<a href=https://mvnrepository.com/artifact/com.fasterxml.jackson.dataformat/jackson-dataformat-xml>ObjectMapper</a>
implementations.</p><h3 id=define-logging-utility>Define Logging Utility</h3><p>Let&rsquo;s create a small logging utility to simplify interactions with the logger</p><div class=highlight><div style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>org.localstack.sampleproject.util</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>org.apache.logging.log4j.LogManager</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>org.apache.logging.log4j.Logger</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>open</span> <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>Logger</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>val</span> <span style=color:#000>LOGGER</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>Logger</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>LogManager</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getLogger</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>javaClass</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>enclosingClass</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span></span></span></code></pre></td></tr></table></div></div><h3 id=add-requestresponse-utilities>Add Request/Response utilities</h3><p>To reduce the amount of boilerplate code, we are going to introduce three
utility functions for our Rest API communications:</p><ul><li>to build regular json response</li><li>to build error json response</li><li>to parse request payload using ObjectMapper.
Note that ObjectMapper does not necessarily need to be a JSON only.
It could also be XML or any other Mapper extended from standard ObjectMapper.
Your application may even support multiple protocols with different request/response formats at once.</li></ul><p>Let&rsquo;s define utility functions to to build API gateway responses:</p><div class=highlight><div style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>org.localstack.sampleproject.util</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>org.springframework.messaging.Message</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>org.springframework.messaging.support.MessageBuilder</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>data</span> <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>ResponseError</span><span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>val</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>String</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>fun</span> <span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>T</span><span style=color:#000;font-weight:700>&gt;</span><span style=color:#000>buildJsonResponse</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>data</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>T</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>code</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>Int</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>200</span><span style=color:#000;font-weight:700>):</span> <span style=color:#000>Message</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>T</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>MessageBuilder</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>.</span><span style=color:#000>withPayload</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>data</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>.</span><span style=color:#000>setHeader</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Content-Type&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;application/json&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>.</span><span style=color:#000>setHeader</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Access-Control-Allow-Origin&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;*&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>.</span><span style=color:#000>setHeader</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Access-Control-Allow-Methods&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;OPTIONS,POST,GET&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>.</span><span style=color:#000>setHeader</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;statusCode&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>code</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>.</span><span style=color:#000>build</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>fun</span> <span style=color:#000>buildJsonErrorResponse</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>message</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>String</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>code</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>Int</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>500</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>=</span>
</span></span><span style=display:flex><span>    <span style=color:#000>buildJsonResponse</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ResponseError</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>message</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>code</span><span style=color:#000;font-weight:700>)</span></span></span></code></pre></td></tr></table></div></div><p>And now a utility function to process API Gateway requests:</p><div class=highlight><div style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>org.localstack.sampleproject.util</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>com.amazonaws.services.lambda.runtime.events.APIGatewayProxyRequestEvent</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>com.fasterxml.jackson.databind.ObjectMapper</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>org.springframework.messaging.Message</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>java.util.function.Function</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>fun</span> <span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>T</span><span style=color:#000;font-weight:700>&gt;</span><span style=color:#000>apiGatewayFunction</span><span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>    <span style=color:#000>objectMapper</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>ObjectMapper</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#000>callable</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>message</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>Message</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>T</span><span style=color:#000;font-weight:700>&gt;,</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>APIGatewayProxyRequestEvent</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#000>Message</span><span style=color:#000;font-weight:700>&lt;*&gt;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>):</span> <span style=color:#000>Function</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>Message</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>T</span><span style=color:#000;font-weight:700>&gt;,</span> <span style=color:#000>Message</span><span style=color:#000;font-weight:700>&lt;*&gt;&gt;</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>Function</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>input</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>try</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>val</span> <span style=color:#000>context</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>objectMapper</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>readValue</span><span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>            <span style=color:#000>objectMapper</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>writeValueAsString</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>input</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>headers</span><span style=color:#000;font-weight:700>),</span>
</span></span><span style=display:flex><span>            <span style=color:#000>APIGatewayProxyRequestEvent</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#204a87;font-weight:700>class</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>java</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>return</span><span style=color:#5c35cc;font-weight:700>@Function</span> <span style=color:#000>callable</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>input</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span> <span style=color:#204a87;font-weight:700>catch</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>e</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>Throwable</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>val</span> <span style=color:#000>message</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>e</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>?.</span><span style=color:#000>replace</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;</span><span style=color:#4e9a06>\n</span><span style=color:#4e9a06>&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>)</span><span style=color:#ce5c00;font-weight:700>?.</span><span style=color:#000>replace</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;</span><span style=color:#4e9a06>\&#34;</span><span style=color:#4e9a06>&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;&#39;&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>return</span><span style=color:#5c35cc;font-weight:700>@Function</span> <span style=color:#000>buildJsonErrorResponse</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>message</span> <span style=color:#ce5c00;font-weight:700>?:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>500</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span></span></span></code></pre></td></tr></table></div></div><h3 id=creating-a-sample-model--dto>Creating a sample Model / DTO</h3><p>To transfer data from requests into something more meaningful than JSON strings
(and back) you will be using a lot of Models and Data Transfer Objects (DTOs).
It&rsquo;s time to define our first one.</p><div class=highlight><div style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>org.localstack.sampleproject.model</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>com.fasterxml.jackson.annotation.JsonIgnore</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>data</span> <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>SampleModel</span><span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>val</span> <span style=color:#000>id</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>Int</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>val</span> <span style=color:#000>name</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>String</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#5c35cc;font-weight:700>@JsonIgnore</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>val</span> <span style=color:#000>jsonIgnoredProperty</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>String</span><span style=color:#000;font-weight:700>?</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>)</span></span></span></code></pre></td></tr></table></div></div><h3 id=creating-rest-api-endpoints>Creating Rest API endpoints</h3><p>Let&rsquo;s add our first endpoints to simulate CRUD operations on previously
defined <code>SampleModel</code>:</p><div class=highlight><div style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">41
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">42
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>org.localstack.sampleproject.api</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>com.fasterxml.jackson.databind.ObjectMapper</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>org.localstack.sampleproject.model.SampleModel</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>org.localstack.sampleproject.util.Logger</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>org.localstack.sampleproject.util.apiGatewayFunction</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>org.localstack.sampleproject.util.buildJsonResponse</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>org.springframework.context.annotation.Bean</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>org.springframework.stereotype.Component</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>private</span> <span style=color:#204a87;font-weight:700>val</span> <span style=color:#000>SAMPLE</span><span style=color:#000>_RESPONSE</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>mutableListOf</span><span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>    <span style=color:#000>SampleModel</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>id</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>name</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Sample #1&#34;</span><span style=color:#000;font-weight:700>),</span>
</span></span><span style=display:flex><span>    <span style=color:#000>SampleModel</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>id</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>name</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Sample #2&#34;</span><span style=color:#000;font-weight:700>),</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#5c35cc;font-weight:700>@Component</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>SampleApi</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>private</span> <span style=color:#204a87;font-weight:700>val</span> <span style=color:#000>objectMapper</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>ObjectMapper</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>companion</span> <span style=color:#204a87;font-weight:700>object</span> <span style=color:#000;font-weight:700>:</span> <span style=color:#000>Logger</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#5c35cc;font-weight:700>@Bean</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;POST /v1/entities&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>fun</span> <span style=color:#000>createSampleEntity</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>apiGatewayFunction</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>SampleModel</span><span style=color:#000;font-weight:700>&gt;(</span><span style=color:#000>objectMapper</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>input</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>context</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#000>LOGGER</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>info</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;calling POST /v1/entities&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000>SAMPLE_RESPONSE</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>add</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>input</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>payload</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000>buildJsonResponse</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>input</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>payload</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>code</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>201</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#5c35cc;font-weight:700>@Bean</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;GET /v1/entities&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>fun</span> <span style=color:#000>listSampleEntities</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>apiGatewayFunction</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>ByteArray</span><span style=color:#000;font-weight:700>&gt;(</span><span style=color:#000>objectMapper</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>input</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>context</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#000>LOGGER</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>info</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;calling GET /v1/entities&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000>buildJsonResponse</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;hello world&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#5c35cc;font-weight:700>@Bean</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;GET /v1/entities/get&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>fun</span> <span style=color:#000>getSampleEntity</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>apiGatewayFunction</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>ByteArray</span><span style=color:#000;font-weight:700>&gt;(</span><span style=color:#000>objectMapper</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>input</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>context</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#000>LOGGER</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>info</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;calling GET /v1/entities/get&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>val</span> <span style=color:#000>desiredId</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>queryStringParameters</span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;id&#34;</span><span style=color:#000;font-weight:700>]</span><span style=color:#ce5c00;font-weight:700>!!</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>toInt</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>        <span style=color:#000>buildJsonResponse</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>SAMPLE_RESPONSE</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>find</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>it</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>id</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#000>desiredId</span> <span style=color:#000;font-weight:700>})</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span></span></span></code></pre></td></tr></table></div></div><p>Note how we used Spring&rsquo;s dependency injection to inject <code>ObjectMapper</code> Bean we
configured earlier.</p><h4 id=cold-start-and-warmup-pro>Cold Start and Warmup (PRO)</h4><div class="alert alert-info" role=alert><h4 class=alert-heading>Pro Features</h4>Please note that <em>EVENTS</em> is a LocalStack PRO feature and is not supported
in Community version</div><p>We know Java&rsquo;s cold start is always a pain.
To minimize this pain, we will try to define a pre-warming endpoint within the Rest API.
By invoking this function every 5-10 mins we can make sure Rest API lambda is always kept in a pre-warmed state.</p><div class=highlight><div style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>org.localstack.sampleproject.api</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>com.fasterxml.jackson.databind.ObjectMapper</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>org.localstack.sampleproject.util.apiGatewayFunction</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>org.localstack.sampleproject.util.buildJsonResponse</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>org.springframework.context.annotation.Bean</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>org.springframework.stereotype.Component</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#5c35cc;font-weight:700>@Component</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>ScheduleApi</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>private</span> <span style=color:#204a87;font-weight:700>val</span> <span style=color:#000>objectMapper</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>ObjectMapper</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#5c35cc;font-weight:700>@Bean</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;SCHEDULE warmup&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>fun</span> <span style=color:#000>warmup</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>apiGatewayFunction</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>ByteArray</span><span style=color:#000;font-weight:700>&gt;(</span><span style=color:#000>objectMapper</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>input</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>context</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#8f5902;font-style:italic>// execute scheduled events
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>        <span style=color:#000>buildJsonResponse</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;OK&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span></span></span></code></pre></td></tr></table></div></div><p>Now you can add a scheduled event to the Rest API lambda function with the following synthetic payload (to simulate API gateway request).
This way, you can define any other scheduled events, but we recommend using pure lambda functions.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;httpMethod&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;SCHEDULE&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;path&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;warmup&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>As you may have guessed, this input will get mapped to the <code>SCHEDULE warmup</code> Bean.</p><blockquote><p>For more information, please read the &ldquo;Setting up Deployment&rdquo; section.</p></blockquote><h3 id=creating-other-lambda-handlers>Creating other lambda Handlers</h3><p>HTTP requests are not the only thing our Spring Function-powered lambdas can do.
We can still define pure lambda functions, DynamoDB stream handlers, and so on.</p><p>Below you can find a little example of few lambda functions grouped in <code>LambdaApi</code> class.</p><div class=highlight><div style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>org.localstack.sampleproject.api</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>com.amazonaws.services.lambda.runtime.events.DynamodbEvent</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>org.localstack.sampleproject.model.SampleModel</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>org.localstack.sampleproject.util.Logger</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>org.springframework.cloud.function.adapter.aws.SpringBootStreamHandler</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>org.springframework.context.annotation.Bean</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>org.springframework.stereotype.Component</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>java.util.function.Function</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#5c35cc;font-weight:700>@Component</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>LambdaApi</span> <span style=color:#000;font-weight:700>:</span> <span style=color:#000>SpringBootStreamHandler</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>companion</span> <span style=color:#204a87;font-weight:700>object</span> <span style=color:#000;font-weight:700>:</span> <span style=color:#000>Logger</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#5c35cc;font-weight:700>@Bean</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>fun</span> <span style=color:#000>functionOne</span><span style=color:#000;font-weight:700>():</span> <span style=color:#000>Function</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>Any</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>String</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>Function</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#000>LOGGER</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>info</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;calling function one&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>return</span><span style=color:#5c35cc;font-weight:700>@Function</span> <span style=color:#4e9a06>&#34;ONE&#34;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#5c35cc;font-weight:700>@Bean</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>fun</span> <span style=color:#000>functionTwo</span><span style=color:#000;font-weight:700>():</span> <span style=color:#000>Function</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>SampleModel</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>SampleModel</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>Function</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#000>LOGGER</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>info</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;calling function two&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>return</span><span style=color:#5c35cc;font-weight:700>@Function</span> <span style=color:#204a87;font-weight:700>it</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#5c35cc;font-weight:700>@Bean</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>fun</span> <span style=color:#000>dynamoDbStreamHandlerExample</span><span style=color:#000;font-weight:700>():</span> <span style=color:#000>Function</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>DynamodbEvent</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Unit</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>Function</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#000>LOGGER</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>info</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;handling DynamoDB stream event&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span></span></span></code></pre></td></tr></table></div></div><p>As you can see from the example above, we are using <code>SpringBootStreamHandler</code>
class as a base that takes care of the application bootstrapping process and
AWS requests transformation.</p><p>Now <code>org.localstack.sampleproject.api.LambdaApi</code> can be used as a handler for
your lambda function along with <code>FUNCTION_NAME</code> environmental variable with
the function bean name.</p><p>You may have noticed we used <code>DynamodbEvent</code> in the last example.
The <code>Lambda-Events</code> package comes with a set of predefined wrappers that you can use to handle different lifecycle events from AWS.</p><h2 id=setting-up-deployment>Setting up Deployment</h2><p>Check our <a href=https://github.com/localstack/localstack-pro-samples/tree/master/sample-archive/spring-cloud-function-microservice>sample project</a>
for usage examples.</p><ul class="nav nav-tabs" id=tabs-15 role=tablist><li class=nav-item><a class="nav-link active persistLang-yaml" id=tabs-15-0-tab data-toggle=tab href=#tabs-15-0 role=tab onclick='persistLang("yaml")' aria-controls=tabs-15-0 aria-selected=false>Serverless</a></li><li class=nav-item><a class="nav-link persistLang-kotlin" id=tabs-15-1-tab data-toggle=tab href=#tabs-15-1 role=tab onclick='persistLang("kotlin")' aria-controls=tabs-15-1 aria-selected=false>AWS CDK</a></li><li class=nav-item><a class="nav-link persistLang-tf" id=tabs-15-2-tab data-toggle=tab href=#tabs-15-2 role=tab onclick='persistLang("tf")' aria-controls=tabs-15-2 aria-selected=false>Terraform</a></li></ul><div class=tab-content id=tabs-15-content><div class="tab-pane fade show active" id=tabs-15-0 role=tabpanel aria-labelled-by=tabs-15-0-tab><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>service</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>localstack-sampleproject-serverless</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>provider</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>aws</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>runtime</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>java11</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>stage</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>${opt:stage}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>region</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>us-west-1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>lambdaHashingVersion</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>20201221</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>deploymentBucket</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>deployment-bucket</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>package</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>artifact</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>build/libs/localstack-sampleproject-all.jar</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>plugins</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#000>serverless-localstack</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#000>serverless-deployment-bucket</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>custom</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>localstack</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>stages</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#000>local</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>functions</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>http_proxy</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>timeout</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>30</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>handler</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>org.springframework.cloud.function.adapter.aws.FunctionInvoker::handleRequest</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>events</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>http</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>path</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/{proxy+}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>method</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ANY</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>cors</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># Please, note that events are a LocalStack PRO feature</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>schedule</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>rate</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>rate(10 minutes)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>enabled</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>input</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>httpMethod</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>SCHEDULE</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>path</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>warmup</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>lambda_helloOne</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>timeout</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>30</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>handler</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>org.localstack.sampleproject.api.LambdaApi</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>environment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>FUNCTION_NAME</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>functionOne</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>lambda_helloTwo</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>timeout</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>30</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>handler</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>org.localstack.sampleproject.api.LambdaApi</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>environment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>FUNCTION_NAME</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>functionTwo</span></span></span></code></pre></div></div><div class="tab-pane fade" id=tabs-15-1 role=tabpanel aria-labelled-by=tabs-15-1-tab><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>org.localstack.cdkstack</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>java.util.UUID</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>software.amazon.awscdk.core.Construct</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>software.amazon.awscdk.core.Duration</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>software.amazon.awscdk.core.Stack</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>software.amazon.awscdk.services.apigateway.CorsOptions</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>software.amazon.awscdk.services.apigateway.LambdaRestApi</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>software.amazon.awscdk.services.apigateway.StageOptions</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>software.amazon.awscdk.services.events.Rule</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>software.amazon.awscdk.services.events.RuleTargetInput</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>software.amazon.awscdk.services.events.Schedule</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>software.amazon.awscdk.services.events.targets.LambdaFunction</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>software.amazon.awscdk.services.lambda.*</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>software.amazon.awscdk.services.lambda.Function</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>software.amazon.awscdk.services.s3.Bucket</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>private</span> <span style=color:#204a87;font-weight:700>val</span> <span style=color:#000>STAGE</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>System</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getenv</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;STAGE&#34;</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>?:</span> <span style=color:#4e9a06>&#34;local&#34;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>private</span> <span style=color:#204a87;font-weight:700>const</span> <span style=color:#204a87;font-weight:700>val</span> <span style=color:#000>JAR</span><span style=color:#000>_PATH</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;../../build/libs/localstack-sampleproject-all.jar&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>ApplicationStack</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>parent</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>Construct</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>name</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>String</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>:</span> <span style=color:#000>Stack</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>parent</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>name</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>init</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>val</span> <span style=color:#000>restApiLambda</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>Function</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Builder</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>create</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>this</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;RestApiFunction&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>.</span><span style=color:#000>code</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Code</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>fromAsset</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>JAR_PATH</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>.</span><span style=color:#000>handler</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;org.springframework.cloud.function.adapter.aws.FunctionInvoker&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>.</span><span style=color:#000>timeout</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Duration</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>seconds</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>30</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>.</span><span style=color:#000>runtime</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Runtime</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>JAVA_11</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>.</span><span style=color:#000>tracing</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Tracing</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ACTIVE</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>.</span><span style=color:#000>build</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>val</span> <span style=color:#000>corsOptions</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>CorsOptions</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>builder</span><span style=color:#000;font-weight:700>().</span><span style=color:#000>allowOrigins</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>listOf</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;*&#34;</span><span style=color:#000;font-weight:700>)).</span><span style=color:#000>allowMethods</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>listOf</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;*&#34;</span><span style=color:#000;font-weight:700>)).</span><span style=color:#000>build</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#000>LambdaRestApi</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Builder</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>create</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>this</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;ExampleRestApi&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>.</span><span style=color:#000>proxy</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>.</span><span style=color:#000>restApiName</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;ExampleRestApi&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>.</span><span style=color:#000>defaultCorsPreflightOptions</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>corsOptions</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>.</span><span style=color:#000>deployOptions</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>StageOptions</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Builder</span><span style=color:#000;font-weight:700>().</span><span style=color:#000>stageName</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>STAGE</span><span style=color:#000;font-weight:700>).</span><span style=color:#000>build</span><span style=color:#000;font-weight:700>())</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>.</span><span style=color:#000>handler</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>restApiLambda</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>.</span><span style=color:#000>build</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>val</span> <span style=color:#000>warmupRule</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>Rule</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Builder</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>create</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>this</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;WarmupRule&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>.</span><span style=color:#000>schedule</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Schedule</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>rate</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Duration</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>minutes</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#000;font-weight:700>)))</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>.</span><span style=color:#000>build</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>val</span> <span style=color:#000>warmupTarget</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>LambdaFunction</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Builder</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>create</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>restApiLambda</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>.</span><span style=color:#000>event</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>RuleTargetInput</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>fromObject</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>mapOf</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;httpMethod&#34;</span> <span style=color:#000>to</span> <span style=color:#4e9a06>&#34;SCHEDULE&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;path&#34;</span> <span style=color:#000>to</span> <span style=color:#4e9a06>&#34;warmup&#34;</span><span style=color:#000;font-weight:700>)))</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>.</span><span style=color:#000>build</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#8f5902;font-style:italic>// Please note that events is a LocalStack PRO feature
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>        <span style=color:#000>warmupRule</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>addTarget</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>warmupTarget</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#000>SingletonFunction</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Builder</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>create</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>this</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;ExampleFunctionOne&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>.</span><span style=color:#000>code</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Code</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>fromAsset</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>JAR_PATH</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>.</span><span style=color:#000>handler</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;org.localstack.sampleproject.api.LambdaApi&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>.</span><span style=color:#000>environment</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>mapOf</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;FUNCTION_NAME&#34;</span> <span style=color:#000>to</span> <span style=color:#4e9a06>&#34;functionOne&#34;</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>.</span><span style=color:#000>timeout</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Duration</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>seconds</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>30</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>.</span><span style=color:#000>runtime</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Runtime</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>JAVA_11</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>.</span><span style=color:#000>uuid</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>UUID</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>randomUUID</span><span style=color:#000;font-weight:700>().</span><span style=color:#000>toString</span><span style=color:#000;font-weight:700>())</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>.</span><span style=color:#000>build</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#000>SingletonFunction</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Builder</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>create</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>this</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;ExampleFunctionTwo&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>.</span><span style=color:#000>code</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Code</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>fromAsset</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>JAR_PATH</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>.</span><span style=color:#000>handler</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;org.localstack.sampleproject.api.LambdaApi&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>.</span><span style=color:#000>environment</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>mapOf</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;FUNCTION_NAME&#34;</span> <span style=color:#000>to</span> <span style=color:#4e9a06>&#34;functionTwo&#34;</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>.</span><span style=color:#000>timeout</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Duration</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>seconds</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>30</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>.</span><span style=color:#000>runtime</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Runtime</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>JAVA_11</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>.</span><span style=color:#000>uuid</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>UUID</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>randomUUID</span><span style=color:#000;font-weight:700>().</span><span style=color:#000>toString</span><span style=color:#000;font-weight:700>())</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>.</span><span style=color:#000>build</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span></span></span></code></pre></div></div><div class="tab-pane fade" id=tabs-15-2 role=tabpanel aria-labelled-by=tabs-15-2-tab><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tf data-lang=tf><span style=display:flex><span><span style=color:#204a87;font-weight:700>variable</span> <span style=color:#4e9a06>&#34;STAGE&#34;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>type</span>    = <span style=color:#000>string</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>default</span> = <span style=color:#4e9a06>&#34;local&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>variable</span> <span style=color:#4e9a06>&#34;AWS_REGION&#34;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>type</span>    = <span style=color:#000>string</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>default</span> = <span style=color:#4e9a06>&#34;us-east-1&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>variable</span> <span style=color:#4e9a06>&#34;JAR_PATH&#34;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>type</span>    = <span style=color:#000>string</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>default</span> = <span style=color:#4e9a06>&#34;build/libs/localstack-sampleproject-all.jar&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>provider</span> <span style=color:#4e9a06>&#34;aws&#34;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>access_key</span>                  = <span style=color:#4e9a06>&#34;test_access_key&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>secret_key</span>                  = <span style=color:#4e9a06>&#34;test_secret_key&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>region</span>                      = <span style=color:#204a87>var</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>AWS_REGION</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>s3_force_path_style</span>         = <span style=color:#204a87;font-weight:700>true</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>skip_credentials_validation</span> = <span style=color:#204a87;font-weight:700>true</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>skip_metadata_api_check</span>     = <span style=color:#204a87;font-weight:700>true</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>skip_requesting_account_id</span>  = <span style=color:#204a87;font-weight:700>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>endpoints</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#c4a000>apigateway</span>       = <span style=color:#204a87>var</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>STAGE</span> =<span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;local&#34;</span> <span style=color:#ce5c00;font-weight:700>?</span> <span style=color:#4e9a06>&#34;http://localhost:4566&#34;</span> <span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>null</span>
</span></span><span style=display:flex><span>        <span style=color:#c4a000>cloudformation</span>   = <span style=color:#204a87>var</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>STAGE</span> =<span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;local&#34;</span> <span style=color:#ce5c00;font-weight:700>?</span> <span style=color:#4e9a06>&#34;http://localhost:4566&#34;</span> <span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>null</span>
</span></span><span style=display:flex><span>        <span style=color:#c4a000>cloudwatch</span>       = <span style=color:#204a87>var</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>STAGE</span> =<span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;local&#34;</span> <span style=color:#ce5c00;font-weight:700>?</span> <span style=color:#4e9a06>&#34;http://localhost:4566&#34;</span> <span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>null</span>
</span></span><span style=display:flex><span>        <span style=color:#c4a000>cloudwatchevents</span> = <span style=color:#204a87>var</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>STAGE</span> =<span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;local&#34;</span> <span style=color:#ce5c00;font-weight:700>?</span> <span style=color:#4e9a06>&#34;http://localhost:4566&#34;</span> <span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>null</span>
</span></span><span style=display:flex><span>        <span style=color:#c4a000>iam</span>              = <span style=color:#204a87>var</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>STAGE</span> =<span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;local&#34;</span> <span style=color:#ce5c00;font-weight:700>?</span> <span style=color:#4e9a06>&#34;http://localhost:4566&#34;</span> <span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>null</span>
</span></span><span style=display:flex><span>        <span style=color:#c4a000>lambda</span>           = <span style=color:#204a87>var</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>STAGE</span> =<span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;local&#34;</span> <span style=color:#ce5c00;font-weight:700>?</span> <span style=color:#4e9a06>&#34;http://localhost:4566&#34;</span> <span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>null</span>
</span></span><span style=display:flex><span>        <span style=color:#c4a000>s3</span>               = <span style=color:#204a87>var</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>STAGE</span> =<span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;local&#34;</span> <span style=color:#ce5c00;font-weight:700>?</span> <span style=color:#4e9a06>&#34;http://localhost:4566&#34;</span> <span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>null</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>resource</span> <span style=color:#4e9a06>&#34;aws_iam_role&#34;</span> <span style=color:#4e9a06>&#34;lambda-execution-role&#34;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>name</span> = <span style=color:#4e9a06>&#34;lambda-execution-role&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>assume_role_policy</span> = <span style=color:#ce5c00;font-weight:700>&lt;&lt;EOF</span><span style=color:#4e9a06>
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>{
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  &#34;Version&#34;: &#34;2012-10-17&#34;,
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  &#34;Statement&#34;: [
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    {
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>      &#34;Action&#34;: &#34;sts:AssumeRole&#34;,
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>      &#34;Principal&#34;: {
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>        &#34;Service&#34;: &#34;lambda.amazonaws.com&#34;
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>      },
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>      &#34;Effect&#34;: &#34;Allow&#34;,
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>      &#34;Sid&#34;: &#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    }
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  ]
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>}
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span><span style=color:#ce5c00;font-weight:700>EOF</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>resource</span> <span style=color:#4e9a06>&#34;aws_lambda_function&#34;</span> <span style=color:#4e9a06>&#34;restApiLambdaFunction&#34;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>filename</span>      = <span style=color:#204a87>var</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>JAR_PATH</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>function_name</span> = <span style=color:#4e9a06>&#34;RestApiFunction&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>role</span>          = <span style=color:#000>aws_iam_role</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>lambda</span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#000>execution</span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#000>role</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>arn</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>handler</span>       = <span style=color:#4e9a06>&#34;org.springframework.cloud.function.adapter.aws.FunctionInvoker&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>runtime</span>       = <span style=color:#4e9a06>&#34;java11&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>timeout</span>       = <span style=color:#0000cf;font-weight:700>30</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>source_code_hash</span> = <span style=color:#204a87>filebase64sha256</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87>var</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>JAR_PATH</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>resource</span> <span style=color:#4e9a06>&#34;aws_api_gateway_rest_api&#34;</span> <span style=color:#4e9a06>&#34;rest-api&#34;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>name</span> = <span style=color:#4e9a06>&#34;ExampleRestApi&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>resource</span> <span style=color:#4e9a06>&#34;aws_api_gateway_resource&#34;</span> <span style=color:#4e9a06>&#34;proxy&#34;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>rest_api_id</span> = <span style=color:#000>aws_api_gateway_rest_api</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>rest</span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#000>api</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>id</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>parent_id</span>   = <span style=color:#000>aws_api_gateway_rest_api</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>rest</span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#000>api</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>root_resource_id</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>path_part</span>   = <span style=color:#4e9a06>&#34;{proxy+}&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>resource</span> <span style=color:#4e9a06>&#34;aws_api_gateway_method&#34;</span> <span style=color:#4e9a06>&#34;proxy&#34;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>rest_api_id</span>   = <span style=color:#000>aws_api_gateway_rest_api</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>rest</span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#000>api</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>id</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>resource_id</span>   = <span style=color:#000>aws_api_gateway_resource</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>proxy</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>id</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>http_method</span>   = <span style=color:#4e9a06>&#34;ANY&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>authorization</span> = <span style=color:#4e9a06>&#34;NONE&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>resource</span> <span style=color:#4e9a06>&#34;aws_api_gateway_integration&#34;</span> <span style=color:#4e9a06>&#34;proxy&#34;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>rest_api_id</span> = <span style=color:#000>aws_api_gateway_rest_api</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>rest</span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#000>api</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>id</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>resource_id</span> = <span style=color:#000>aws_api_gateway_method</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>proxy</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>resource_id</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>http_method</span> = <span style=color:#000>aws_api_gateway_method</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>proxy</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>http_method</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>integration_http_method</span> = <span style=color:#4e9a06>&#34;POST&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>type</span>                    = <span style=color:#4e9a06>&#34;AWS_PROXY&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>uri</span>                     = <span style=color:#000>aws_lambda_function</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>restApiLambdaFunction</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>invoke_arn</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>resource</span> <span style=color:#4e9a06>&#34;aws_api_gateway_deployment&#34;</span> <span style=color:#4e9a06>&#34;rest-api-deployment&#34;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>depends_on</span> = <span style=color:#000;font-weight:700>[</span><span style=color:#000>aws_api_gateway_integration</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>proxy</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>rest_api_id</span> = <span style=color:#000>aws_api_gateway_rest_api</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>rest</span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#000>api</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>id</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>stage_name</span>  = <span style=color:#204a87>var</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>STAGE</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>resource</span> <span style=color:#4e9a06>&#34;aws_cloudwatch_event_rule&#34;</span> <span style=color:#4e9a06>&#34;warmup&#34;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>name</span> = <span style=color:#4e9a06>&#34;warmup-event-rule&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>schedule_expression</span> = <span style=color:#4e9a06>&#34;rate(10 minutes)&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>resource</span> <span style=color:#4e9a06>&#34;aws_cloudwatch_event_target&#34;</span> <span style=color:#4e9a06>&#34;warmup&#34;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>target_id</span> = <span style=color:#4e9a06>&#34;warmup&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>rule</span> = <span style=color:#000>aws_cloudwatch_event_rule</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>warmup</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>name</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>arn</span> = <span style=color:#000>aws_lambda_function</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>restApiLambdaFunction</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>arn</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>input</span> = <span style=color:#4e9a06>&#34;{</span><span style=color:#a40000>\</span><span style=color:#4e9a06>&#34;</span><span style=color:#000>httpMethod</span><span style=color:#a40000>\</span><span style=color:#4e9a06>&#34;: </span><span style=color:#a40000>\</span><span style=color:#4e9a06>&#34;</span><span style=color:#000>SCHEDULE</span><span style=color:#a40000>\</span><span style=color:#4e9a06>&#34;, </span><span style=color:#a40000>\</span><span style=color:#4e9a06>&#34;</span><span style=color:#000>path</span><span style=color:#a40000>\</span><span style=color:#4e9a06>&#34;: </span><span style=color:#a40000>\</span><span style=color:#4e9a06>&#34;</span><span style=color:#000>warmup</span><span style=color:#a40000>\</span><span style=color:#4e9a06>&#34;}&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>resource</span> <span style=color:#4e9a06>&#34;aws_lambda_permission&#34;</span> <span style=color:#4e9a06>&#34;warmup-permission&#34;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>statement_id</span> = <span style=color:#4e9a06>&#34;AllowExecutionFromCloudWatch&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>action</span> = <span style=color:#4e9a06>&#34;lambda:InvokeFunction&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>function_name</span> = <span style=color:#000>aws_lambda_function</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>restApiLambdaFunction</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>function_name</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>principal</span> = <span style=color:#4e9a06>&#34;events.amazonaws.com&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>source_arn</span> = <span style=color:#000>aws_cloudwatch_event_rule</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>warmup</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>arn</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>resource</span> <span style=color:#4e9a06>&#34;aws_lambda_function&#34;</span> <span style=color:#4e9a06>&#34;exampleFunctionOne&#34;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>filename</span>      = <span style=color:#204a87>var</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>JAR_PATH</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>function_name</span> = <span style=color:#4e9a06>&#34;ExampleFunctionOne&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>role</span>          = <span style=color:#000>aws_iam_role</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>lambda</span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#000>execution</span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#000>role</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>arn</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>handler</span>       = <span style=color:#4e9a06>&#34;org.localstack.sampleproject.api.LambdaApi&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>runtime</span>       = <span style=color:#4e9a06>&#34;java11&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>timeout</span>       = <span style=color:#0000cf;font-weight:700>30</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>source_code_hash</span> = <span style=color:#204a87>filebase64sha256</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87>var</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>JAR_PATH</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000>environment</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#c4a000>variables</span> = <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#c4a000>FUNCTION_NAME</span> = <span style=color:#4e9a06>&#34;functionOne&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>resource</span> <span style=color:#4e9a06>&#34;aws_lambda_function&#34;</span> <span style=color:#4e9a06>&#34;exampleFunctionTwo&#34;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>filename</span>      = <span style=color:#204a87>var</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>JAR_PATH</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>function_name</span> = <span style=color:#4e9a06>&#34;ExampleFunctionTwo&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>role</span>          = <span style=color:#000>aws_iam_role</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>lambda</span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#000>execution</span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#000>role</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>arn</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>handler</span>       = <span style=color:#4e9a06>&#34;org.localstack.sampleproject.api.LambdaApi&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>runtime</span>       = <span style=color:#4e9a06>&#34;java11&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>timeout</span>       = <span style=color:#0000cf;font-weight:700>30</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>source_code_hash</span> = <span style=color:#204a87>filebase64sha256</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87>var</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>JAR_PATH</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000>environment</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#c4a000>variables</span> = <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#c4a000>FUNCTION_NAME</span> = <span style=color:#4e9a06>&#34;functionTwo&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span></span></span></code></pre></div></div></div><h2 id=testing-debugging-and-code-hot-swapping>Testing, Debugging and Code hot-swapping</h2><p>Please read our <a href=/content/en/tools/lambda-tools/_index.md>Lambda Tools</a>
documentation to learn more about testing, debugging and code hot-swapping
for JVM Lambda functions.</p><h2 id=useful-links>Useful Links</h2><ul><li><a href=https://github.com/localstack/localstack-pro-samples/tree/master/sample-archive/spring-cloud-function-microservice>Spring Cloud Function on LocalStack (Kotlin JVM)</a></li></ul><div class="text-muted mt-5 pt-3 border-top">Last modified July 26, 2022: <a href=https://github.com/localstack/docs/commit/6ab8502dc4d85f97afc739ef1b6fdc8a4b2d839d>fix some typos (#214) (6ab8502d)</a></div></div></main></div></div><footer class="footer-localstack d-print-none"><div class=container-fluid><div class=row><div class=col><div class=mb-3><a href=https://localstack.cloud><img class=footer-logo src=/images/logo.svg></a></div></div><div class=col><div class="text-right link-lists"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a target=_blank rel=noopener href=https://twitter.com/_localstack aria-label=Twitter><i class="fab fa-twitter"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Discussion aria-label=Discussion><a target=_blank rel=noopener href=https://discuss.localstack.cloud/ aria-label=Discussion><i class="fa fa-comments"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow"><a target=_blank rel=noopener href=https://stackoverflow.com/questions/tagged/localstack aria-label="Stack Overflow"><i class="fab fa-stack-overflow"></i></a></li></ul><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a target=_blank rel=noopener href=https://github.com/localstack/ aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Issue tracker" aria-label="Issue tracker"><a target=_blank rel=noopener href=https://github.com/localstack/localstack/issues aria-label="Issue tracker"><i class="fa fa-bug"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack><a target=_blank rel=noopener href=https://localstack-community.slack.com/ aria-label=Slack><i class="fab fa-slack"></i></a></li></ul></div></div></div><div class=row><div class=col><hr><div class=row><div class=col><small>Copyright &copy; 2022 LocalStack All Rights Reserved</small></div><div class="col text-right"><small class=ml-1><a href=https://localstack.cloud/privacy-policy/ target=_blank rel=noopener>Privacy Policy</a></small></div></div></div></div></div></footer></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA==" crossorigin=anonymous></script>
<script src=/js/tabpane-persist.js></script>
<script src=/js/main.min.91798a335c881f1b6b805085ba4aa22d1dbd2b0b18d105d05189fa104ddae350.js integrity="sha256-kXmKM1yIHxtrgFCFukqiLR29KwsY0QXQUYn6EE3a41A=" crossorigin=anonymous></script></body></html>